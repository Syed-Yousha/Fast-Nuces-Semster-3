INCLUDE Irvine32.inc

.data
    ArraySize DWORD 5
    Array DWORD 64, 34, 25, 12, 22

.code
main PROC
    mov esi, OFFSET Array
    mov ecx, ArraySize
    call BubbleSort
    mov esi, OFFSET Array
    mov ecx, ArraySize
    call PrintIntArray
    exit
main ENDP

BubbleSort PROC
    mov ebx, 0
    outer_loop:
        mov ecx, ArraySize
        push ecx
        dec ecx
        inner_loop:
            mov eax, [esi + 4]
            cmp eax, [esi]
            jge no_swap
            mov edx, [esi]
            mov ebx, [esi + 4]
            mov [esi + 4], edx
            mov [esi], ebx
            no_swap:
                add esi, 4
        loop inner_loop
        pop ecx
        sub esi, ebx
        add ebx, 4
        cmp ebx, ArraySize
        jl outer_loop
    ret
BubbleSort ENDP

PrintIntArray PROC
    print_loop:
        mov eax, [esi]
        call WriteDec
        call Crlf
        add esi, 4
        loop print_loop
    ret
PrintIntArray ENDP

END main
